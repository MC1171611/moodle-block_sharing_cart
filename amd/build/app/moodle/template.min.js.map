{"version":3,"file":"template.min.js","sources":["../../../src/app/moodle/template.js"],"sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport BaseFactory from '../factory';\nimport Templates from \"core/templates\";\nimport Fragment from \"core/fragment\";\n\nexport default class Template {\n    /**\n     * @type {BaseFactory}\n     */\n    #baseFactory;\n\n    /**\n     * @param {BaseFactory} baseFactory\n     */\n    constructor(baseFactory) {\n        this.#baseFactory = baseFactory;\n    }\n\n    /**\n     * @param {String} template\n     * @param {Object} data\n     * @return {Promise<\n     * {\n     *  html: String,\n     *  js: String\n     * }\n     * >}\n     */\n    async renderTemplate(template, data) {\n        return await new Promise((resolve, reject) => {\n            Templates.render(template, data)\n                .then(async (html, js) => {\n                    resolve({\n                        html,\n                        js\n                    });\n                }).fail(reject);\n        });\n    }\n\n    /**\n     * @param {String} component\n     * @param {String} fragment\n     * @param {Number} contextId\n     * @param {Object} data\n     * @return {Promise<\n     * {\n     *  html: String,\n     *  js: String\n     * }\n     * >}\n     */\n    async renderFragment(component, fragment, contextId, data) {\n        return await new Promise((resolve, reject) => {\n            Fragment.loadFragment(\n                component,\n                fragment,\n                contextId,\n                data\n            ).then((html, js) => {\n                resolve({\n                    html,\n                    js\n                });\n            }).fail(reject);\n        });\n    }\n\n    /**\n     * @param {String} js\n     */\n    runTemplateJS(js) {\n        Templates.runTemplateJS(js);\n    }\n\n    /**\n     * @param {String} template\n     * @param {Object} data\n     * @return {Promise<HTMLElement>}\n     */\n    async createElementFromTemplate(template, data) {\n        const element = document.createElement('div');\n\n        const {html, js} = await this.renderTemplate(template, data);\n\n        return await Templates.replaceNode(\n            element,\n            html,\n            js\n        )[0];\n    }\n\n\n    /**\n     * @param {String} component\n     * @param {String} fragment\n     * @param {Number} contextId\n     * @param {Object} data\n     * @return {Promise<HTMLElement[]>}\n     */\n    async createElementsFromFragment(component, fragment, contextId, data) {\n        const element = document.createElement('div');\n\n        const {html, js} = await this.renderFragment(component, fragment, contextId, data);\n\n        return await Templates.replaceNode(\n            element,\n            html,\n            js\n        );\n    }\n\n    /**\n     * @param {String} component\n     * @param {String} fragment\n     * @param {Number} contextId\n     * @param {Object} data\n     * @return {Promise<HTMLElement>}\n     */\n    async createElementFromFragment(component, fragment, contextId, data) {\n        return (await this.createElementsFromFragment(component, fragment, contextId, data))[0];\n    }\n}\n"],"names":["constructor","baseFactory","template","data","Promise","resolve","reject","render","then","async","html","js","fail","component","fragment","contextId","loadFragment","runTemplateJS","element","document","createElement","this","renderTemplate","Templates","replaceNode","renderFragment","createElementsFromFragment"],"mappings":"mwCAcIA,YAAYC,8HACYA,kCAaHC,SAAUC,mBACd,IAAIC,SAAQ,CAACC,QAASC,6BACrBC,OAAOL,SAAUC,MACtBK,MAAKC,MAAOC,KAAMC,MACfN,QAAQ,CACJK,KAAAA,KACAC,GAAAA,QAELC,KAAKN,gCAgBCO,UAAWC,SAAUC,UAAWZ,mBACpC,IAAIC,SAAQ,CAACC,QAASC,4BACtBU,aACLH,UACAC,SACAC,UACAZ,MACFK,MAAK,CAACE,KAAMC,MACVN,QAAQ,CACJK,KAAAA,KACAC,GAAAA,QAELC,KAAKN,WAOhBW,cAAcN,uBACAM,cAAcN,oCAQIT,SAAUC,YAChCe,QAAUC,SAASC,cAAc,QAEjCV,KAACA,KAADC,GAAOA,UAAYU,KAAKC,eAAepB,SAAUC,mBAE1CoB,mBAAUC,YACnBN,QACAR,KACAC,IACF,oCAW2BE,UAAWC,SAAUC,UAAWZ,YACvDe,QAAUC,SAASC,cAAc,QAEjCV,KAACA,KAADC,GAAOA,UAAYU,KAAKI,eAAeZ,UAAWC,SAAUC,UAAWZ,mBAEhEoB,mBAAUC,YACnBN,QACAR,KACAC,oCAWwBE,UAAWC,SAAUC,UAAWZ,mBAC9CkB,KAAKK,2BAA2Bb,UAAWC,SAAUC,UAAWZ,OAAO"}